<?xml version="1.0" encoding="UTF-8"?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms" 
			xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml" 
			x:Class="InfoFabApp.MasterNotificationPage"
			xmlns:converter="clr-namespace:InfoFabApp"
			xmlns:local="clr-namespace:InfoFabApp;assembly=InfoFabApp"
			Title="">

	<ContentPage.BindingContext>
		<local:NotificationItem />
	</ContentPage.BindingContext>
	
	<ContentPage.Resources>
		<ResourceDictionary>
			<converter:FavoriteBooleanConverter x:Key="FavoriteBooleanConverter"/>
		</ResourceDictionary>
	</ContentPage.Resources>
	
	<ContentPage.Title>
		全部訊息
	</ContentPage.Title>

	<ContentPage.ToolbarItems>
		<ToolbarItem Clicked="OnShowSearch" Icon="search.png"/>
<!--		<ToolbarItem x:Name="ToolbarCloseBtn" Clicked="On" Icon="close.png"/>-->
	</ContentPage.ToolbarItems>
	
	<ContentPage.Content>
		<StackLayout>
	        <ListView x:Name="NotificationItems" ItemsSource="{x:Static local:HandleNotificationData._allNotifList}" VerticalOptions="Fill" RowHeight="75">
				
				<ListView.Header>
				    <StackLayout HeightRequest="0" BackgroundColor="#cccccc">
				        <Label Text="" />
				    </StackLayout>
			  	</ListView.Header>
	            <ListView.ItemTemplate>
	                <DataTemplate>
	                    <ViewCell x:Name="CellItem">
							<ViewCell.ContextActions>
								<MenuItem Clicked="OnDelete" CommandParameter="{Binding .}" Text="Delete" IsDestructive="True" />
							</ViewCell.ContextActions>
	                        <StackLayout Orientation="Horizontal" HorizontalOptions="Fill" Padding="20,10,25,10" Spacing="0">
								<Image VerticalOptions="CenterAndExpand" Source="{Binding ImageUri}" />
								<Label Text=" " Margin="20,0,0,0" />
								<Grid>
									<Grid.RowDefinitions>
										<RowDefinition Height="*" />
										<RowDefinition Height="*" />
									</Grid.RowDefinitions>
									<Label Grid.Row="0" VerticalTextAlignment="Center" Text="{Binding Title}" FontSize="15" TextColor="#00BBFF" />
	                            	<Label Grid.Row="1" VerticalTextAlignment="Center" Text="{Binding ReceiveTime}" FontSize="10" TextColor="#503026" />
								</Grid>
<!--								<Label Text="{Binding IsFavorite, Converter={StaticResource FavoriteBooleanConverter}" FontSize="25" TextColor="#FFCC22" VerticalTextAlignment="Center" HorizontalOptions="EndAndExpand">-->
<!--								<Label Text="{Binding IsFavorite, Mode=TwoWay}" FontSize="25" TextColor="#FFCC22" VerticalTextAlignment="Center" HorizontalOptions="EndAndExpand">-->
<!--								<Label x:Name="SymbolStar" Text="{Binding IsFavorite, Converter={StaticResource FavoriteBooleanConverter}" FontSize="25" TextColor="#FFCC22" VerticalTextAlignment="Center" HorizontalOptions="EndAndExpand">-->
<!--								<Label x:Name="SymbolStar" BindingContext="{x:Reference tempval}" Text="{Binding BindingContext.IsFavorite, Converter={StaticResource FavoriteBooleanConverter}" FontSize="25" TextColor="#FFCC22" VerticalTextAlignment="Center" HorizontalOptions="EndAndExpand">-->
								<Label Text="{Binding Path=IsFavorite, Mode=TwoWay, Converter={StaticResource FavoriteBooleanConverter}" FontSize="25" TextColor="#FFCC22" VerticalOptions="CenterAndExpand" HorizontalOptions="EndAndExpand">
									<Label.GestureRecognizers>
										<TapGestureRecognizer NumberOfTapsRequired="1" CommandParameter="{Binding Title}" Tapped="Tgr_Tapped" />
									</Label.GestureRecognizers>
								</Label>
	                        </StackLayout>
	                    </ViewCell>
	                </DataTemplate>
	            </ListView.ItemTemplate>
	        </ListView>
		</StackLayout>
    </ContentPage.Content>
</ContentPage>
